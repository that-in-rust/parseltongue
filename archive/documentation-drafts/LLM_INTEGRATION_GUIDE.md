# Parseltongue LLM Integration Guide

## üéØ Purpose
This guide provides explicit instructions for integrating Parseltongue with LLM-assisted development workflows and porting to new codebases.

## üöÄ Critical Files for New Codebase Integration

### **TIER 1: ABSOLUTELY ESSENTIAL** 
These files MUST be ported for basic functionality:

#### Core Discovery Engine
```
src/discovery/engine.rs                    # Main discovery trait and interface
src/discovery/concurrent_discovery_engine.rs  # Thread-safe implementation
src/discovery/enhanced_isg_node.rs         # ISG nodes with file locations
src/discovery/types.rs                     # Core type definitions
src/isg.rs                                 # In-memory semantic graph
src/lib.rs                                 # Library exports and module structure
```

#### CLI Interface
```
src/cli.rs                                 # CLI with Avengers-themed emojis
src/main.rs                                # Application entry point
pt                                         # Shell script orchestrator (executable)
```

#### Build Configuration
```
Cargo.toml                                 # Dependencies and project config
```### 
**TIER 2: HIGHLY RECOMMENDED**
These files provide advanced functionality and LLM integration:

#### Workflow Orchestration
```
src/discovery/concrete_workflow_orchestrator.rs  # Complete JTBD workflows
src/discovery/workspace_manager.rs               # Persistent analysis sessions
src/discovery/blast_radius_analyzer.rs           # Human-readable impact analysis
src/discovery/output_formatter.rs                # Multi-format output generation
```

#### LLM Integration Toolkit
```
parseltongue_dungeon/scripts/onboard_codebase.sh      # Complete onboarding workflow
parseltongue_dungeon/scripts/generate_llm_context.sh  # LLM context generation
parseltongue_dungeon/scripts/debug_entity.sh          # Entity debugging workflow
parseltongue_dungeon/scripts/feature_impact.sh        # Feature impact analysis
```

#### LLM Instructions & Guides
```
parseltongue_dungeon/llm_instructions/codebase_analysis.md    # Codebase analysis prompts
parseltongue_dungeon/llm_instructions/architecture_review.md  # Architecture review guide
parseltongue_dungeon/llm_instructions/refactor_planning.md    # Refactoring instructions
.kiro/parseltongue-llm-guide.md                              # LLM best practices
```

### **TIER 3: DOCUMENTATION & SPECIFICATIONS**
Essential for understanding and extending the system:

#### Core Documentation
```
README.md                                          # Main project documentation with Mermaid diagrams
.kiro/specs/parseltongue-v2-discovery-first/requirements.md  # Complete requirements
.kiro/specs/parseltongue-v2-discovery-first/design.md        # System design document
docs/ARCHITECTURE_OVERVIEW.md                     # Architecture overview
```## üîß Int
egration Steps for New Codebase

### Step 1: Core System Setup
1. Copy all **TIER 1** files to new codebase
2. Update `Cargo.toml` dependencies as needed
3. Ensure `pt` script has execute permissions: `chmod +x pt`
4. Test basic compilation: `cargo build`

### Step 2: LLM Workflow Integration
1. Copy **TIER 2** files, especially `parseltongue_dungeon/` directory
2. Make scripts executable: `chmod +x parseltongue_dungeon/scripts/*.sh`
3. Test onboarding workflow: `./parseltongue_dungeon/scripts/onboard_codebase.sh`
4. Verify LLM context generation: `./parseltongue_dungeon/scripts/generate_llm_context.sh`

### Step 3: Documentation & Customization
1. Copy **TIER 3** documentation files
2. Update README.md with project-specific information
3. Customize LLM instructions in `parseltongue_dungeon/llm_instructions/`
4. Update `.kiro/` specifications as needed

## üéØ LLM Workflow Commands

### Essential Commands for LLM Integration:
```bash
# Complete codebase onboarding (generates LLM-ready context)
pt onboard

# Generate specific entity context for LLM
./parseltongue_dungeon/scripts/debug_entity.sh <entity_name>

# Analyze feature impact for LLM planning
./parseltongue_dungeon/scripts/feature_impact.sh <feature_description>

# Generate comprehensive LLM context
./parseltongue_dungeon/scripts/generate_llm_context.sh
```## üìã 
LLM Prompt Templates

### For Codebase Analysis:
```
Using the context generated by Parseltongue, analyze the codebase structure focusing on:
1. Key architectural patterns
2. Entity relationships and dependencies
3. Potential refactoring opportunities
4. Code quality and maintainability issues

Context files to reference:
- all_entities.txt (complete entity listing)
- functions.txt (function signatures and locations)
- architecture.html (visual architecture overview)
```

### For Feature Planning:
```
Based on the Parseltongue impact analysis, plan the implementation of [FEATURE]:
1. Identify affected entities and their blast radius
2. Recommend implementation approach
3. Suggest test strategy
4. Highlight potential risks and mitigation strategies

Use the blast-radius analysis output and entity context for informed planning.
```

### For Debugging:
```
Using Parseltongue entity context for [ENTITY_NAME], help debug the issue:
1. Analyze entity relationships and dependencies
2. Identify potential root causes
3. Suggest debugging approach
4. Recommend minimal change scope

Reference the entity context file and caller/usage information.
```

## üîç File Dependencies Map

### Core Dependencies (must be ported together):
- `src/isg.rs` ‚Üê `src/discovery/enhanced_isg_node.rs`
- `src/discovery/engine.rs` ‚Üê `src/discovery/concurrent_discovery_engine.rs`
- `src/cli.rs` ‚Üê `src/discovery/output_formatter.rs`
- `pt` ‚Üê `src/discovery/concrete_workflow_orchestrator.rs`

### LLM Integration Dependencies:
- All `parseltongue_dungeon/scripts/*.sh` ‚Üê `pt` (shell orchestrator)
- `parseltongue_dungeon/llm_instructions/*.md` ‚Üê `.kiro/parseltongue-llm-guide.md`
- Workflow scripts ‚Üê `src/discovery/workspace_manager.rs`

## ‚ö†Ô∏è Critical Notes for LLM Integration

1. **File Paths**: Update any hardcoded paths in scripts when porting
2. **Dependencies**: Ensure all Rust dependencies in `Cargo.toml` are available
3. **Permissions**: Make shell scripts executable after copying
4. **Context Generation**: Run onboarding workflow before LLM analysis
5. **Workspace Management**: Ensure `parseltongue_workspace/` directory is writable

---

*This guide ensures successful integration of Parseltongue's LLM-assisted development capabilities into any new codebase.*